// Generated by CoffeeScript 1.7.1
var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

(function(ng, app) {
  'use strict';
  return app.factory("MouseTracker", function() {
    var MouseTracker;
    MouseTracker = (function() {
      function MouseTracker(canvas, context) {
        this.canvas = canvas;
        this.context = context;
        this.writeMessage = __bind(this.writeMessage, this);
        this.getMousePos = __bind(this.getMousePos, this);
        this.trackMovement = __bind(this.trackMovement, this);
        this.canvas.addEventListener("mousemove", this.trackMovement, false);
      }

      MouseTracker.prototype.trackMovement = function(evt) {
        var message;
        this.mousePos = this.getMousePos(evt);
        message = "Mouse position: " + this.mousePos.x + ", " + this.mousePos.y;
        this.writeMessage(message);
      };

      MouseTracker.prototype.getMousePos = function(evt) {
        var rect;
        rect = this.canvas.getBoundingClientRect();
        return {
          x: Math.floor(evt.clientX - rect.left),
          y: Math.floor(evt.clientY - rect.top)
        };
      };

      MouseTracker.prototype.writeMessage = function(message) {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        this.context.font = "10pt Calibri";
        this.context.fillStyle = "black";
        this.context.fillText(message, 5, 10);
      };

      return MouseTracker;

    })();
    return MouseTracker;
  });
})(angular, rogueLikeLike);
